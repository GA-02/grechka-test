(this.webpackJsonpGrechka=this.webpackJsonpGrechka||[]).push([[0],{115:function(e,t,a){e.exports=a.p+"static/media/bistro-and-restaurant_16-512.5babe431.png"},119:function(e,t,a){e.exports=a(222)},214:function(e,t,a){},215:function(e,t,a){},222:function(e,t,a){"use strict";a.r(t);a(120),a(146),a(148),a(149),a(151),a(152),a(153),a(154),a(155),a(156),a(157),a(158),a(160),a(161),a(162),a(163),a(164),a(165),a(166),a(167),a(168),a(169),a(171),a(172),a(173),a(174),a(175),a(176),a(177),a(178),a(179),a(180),a(181),a(182),a(183),a(184),a(185),a(186),a(187),a(188);var n=a(0),r=a.n(n),c=a(80),o=a.n(c),l=a(14),s=a.n(l),u=a(18),i=a.n(u),m=a(43),p=a(15),f=a(82),b=a.n(f),h=a(45),d=a.n(h),E=a(35),v=a.n(E),y=a(117),k=a.n(y),O=a(83),g=a.n(O),S=(a(198),a(60)),j=a.n(S),C=a(81),x=a.n(C),w=a(52),A=a.n(w),V=a(118),N=a(61),z=a.n(N),P=a(62),W=a.n(P),K=a(59),I=a.n(K),_=a(58),J=a.n(_),T=a(50),U=a.n(T),B=a(53),F=a.n(B),G=a(116),H=a.n(G),D=a(63),L=a.n(D),M=a(115),q=a.n(M),Q=a(51),R=a.n(Q),X=a(57),Y=a.n(X),Z=s.a.supports("VKWebAppTapticNotificationOccurred");function $(e,t){var a,n,r=!1;return function c(){if(r)return a=arguments,void(n=this);r=!0,e.apply(this,arguments),setTimeout((function(){r=!1,a&&(c.apply(n,a),a=n=null)}),t)}}var ee=function(e){var t=e.fetchedState,a=e.snackbarError,c=Object(n.useState)(t.hasOwnProperty("rollsCount")?t.rollsCount:4),o=Object(p.a)(c,2),l=o[0],u=o[1],f=Object(n.useState)(t.hasOwnProperty("toiletVisits")?t.toiletVisits:3),b=Object(p.a)(f,2),h=b[0],E=b[1],y=Object(n.useState)(t.hasOwnProperty("personsCount")?t.personsCount:2),k=Object(p.a)(y,2),O=k[0],g=k[1],S=Object(n.useState)(t.hasOwnProperty("sheetsCount")?t.sheetsCount:40),j=Object(p.a)(S,2),C=j[0],w=j[1],N=Object(n.useState)(a),P=Object(p.a)(N,2),K=P[0],_=P[1],T=function(){var e=Object(m.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z){e.next=3;break}return e.next=3,s.a.send("VKWebAppTapticNotificationOccurred",{type:C<=0?"error":"success"});case 3:if(!(C<=0)){e.next=7;break}return _(r.a.createElement(d.a,{layout:"vertical",onClose:function(){return _(null)},before:r.a.createElement(v.a,{size:24,style:{backgroundColor:"var(--accent)"}},r.a.createElement(A.a,{fill:"#fff",width:14,height:14})),duration:900},"\u0423 \u0432\u0430\u0441 \u043d\u0435 \u043e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u0433\u0440\u0435\u0447\u043a\u0438")),u(0),e.abrupt("return");case 7:t=C-1,a=Math.floor(t/10),w(t),l!==a&&0!==a&&u(a),_(r.a.createElement(d.a,{layout:"vertical",onClose:function(){return _(null)},before:r.a.createElement(v.a,{size:24,style:{backgroundColor:"var(--accent)"}},r.a.createElement(A.a,{fill:"#fff",width:14,height:14})),duration:900},t<=0?"\u0423 \u0432\u0430\u0441 \u043d\u0435 \u043e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u0433\u0440\u0435\u0447\u043a\u0438":"100 \u0433\u0440\u0430\u043c\u043c \u0433\u0440\u0435\u0447\u043a\u0438 \u043f\u043e\u0442\u0440\u0430\u0447\u0435\u043d\u043e, \u043e\u0441\u0442\u0430\u043b\u043e\u0441\u044c ".concat(t," \u043f\u0440\u0438\u0435\u043c\u043e\u0432 \u043f\u0438\u0449\u0438"))),G({sheetsCount:t});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id,!(D()<15&&D()>10)){e.next=5;break}a="\u0434\u043d\u0435\u0439",e.next=15;break;case 5:e.t0=D()%10,e.next=1===e.t0?8:2===e.t0||3===e.t0||4===e.t0?10:5===e.t0||6===e.t0||7===e.t0||8===e.t0||9===e.t0||0===e.t0?12:14;break;case 8:return a="\u0434\u0435\u043d\u044c",e.abrupt("break",15);case 10:return a="\u0434\u043d\u044f",e.abrupt("break",15);case 12:return a="\u0434\u043d\u0435\u0439",e.abrupt("break",15);case 14:return e.abrupt("break",15);case 15:return e.next=17,s.a.send("VKWebAppShowWallPostBox",{message:"\u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u044f \u0433\u0440\u0435\u0447\u043d\u0435\u0432\u043e\u0439 \u043a\u0440\u0443\u043f\u0435, \u044f \u0441\u043c\u043e\u0433\u0443 \u043f\u0440\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c\u0441\u044f ".concat(D()," ").concat(a,' \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0443\u0436\u0430\u0441\u043d\u043e\u0439 \u043f\u0430\u043d\u0434\u0435\u043c\u0438\u0438, \u0443\u0437\u043d\u0430\u0439 \u0441\u0432\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 "\u0413\u0440\u0435\u0447\u043a\u0430 \u2014 \u0432\u044b\u0436\u0438\u0442\u044c \u043b\u044e\u0431\u043e\u0439 \u0446\u0435\u043d\u043e\u0439" '),attachments:"photo{id},https://vk.com/app7672316"});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.send("VKWebAppStorageSet",{key:"state",value:JSON.stringify(Object(V.a)({rollsCount:l,toiletVisits:h,personsCount:O,sheetsCount:C},t))});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=1*h*O,t=10*l;return Math.round(t/e)},M=$((function(e){e!==l&&(w(C+10*(e-l)),u(e),G())}),200),Q=$((function(e){e!==h&&(E(e),G())}),200),X=$((function(e){e!==O&&(g(e),G())}),200);return r.a.createElement(n.Fragment,null,r.a.createElement(R.a,{left:r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{onClick:B},r.a.createElement(x.a,null))),right:r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,null,r.a.createElement(A.a,null)))},"\u0413\u0440\u0435\u0447\u043a\u0430"),r.a.createElement(J.a,null,r.a.createElement("h1",{className:"DaysLeftHeading"},D()),r.a.createElement("h3",{className:"DaysLeftSubheading"},"\u0421\u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043d\u0435\u0439 \u0432\u044b \u043f\u0440\u043e\u0434\u0435\u0440\u0436\u0438\u0442\u0435\u0441\u044c")),r.a.createElement(H.a,null,r.a.createElement(z.a,{step:1,min:0,max:100,value:l,top:r.a.createElement(W.a,{indicator:r.a.createElement(L.a,{size:"m",mode:"primary"},l)},r.a.createElement("span",{role:"img","aria-label":"Toilet paper"},"\ud83e\udd61")," \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0430\u0447\u0435\u043a"),onChange:function(e){return M(e)}}),r.a.createElement(z.a,{step:1,min:1,max:8,value:h,top:r.a.createElement(W.a,{indicator:r.a.createElement(L.a,{size:"m",mode:"primary"},h)},r.a.createElement("span",{role:"img","aria-label":"Poo"},"\ud83e\udd63")," \u041f\u0440\u0438\u0435\u043c\u043e\u0432 \u043f\u0438\u0449\u0438 \u0432 \u0434\u0435\u043d\u044c"),onChange:function(e){return Q(e)}}),r.a.createElement(z.a,{step:1,min:1,max:16,value:O,top:r.a.createElement(W.a,{indicator:r.a.createElement(L.a,{size:"m",mode:"primary"},O)},r.a.createElement("span",{role:"img","aria-label":"People in household"},"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66")," \u041b\u044e\u0434\u0435\u0439 \u0434\u043e\u043c\u0430"),onChange:function(e){return X(e)}})),r.a.createElement(U.a,{vertical:"bottom"},r.a.createElement(F.a,{className:"PooBtnContainer"},r.a.createElement(I.a,{className:"PooBtn",size:"xl",onClick:T},r.a.createElement("img",{src:q.a,alt:"Toilet paper roll"})))),K)},te=(a(214),function(e){var t=e.id,a=e.snackbarError,n=e.fetchedState;return r.a.createElement(j.a,{id:t},n&&r.a.createElement(ee,{fetchedState:n,snackbarError:a}))}),ae=(a(215),function(e){var t=e.id,a=e.go,c=e.route,o=e.fetchedUser,l=e.userHasSeenIntro;return r.a.createElement(j.a,{id:t,centered:!0},r.a.createElement(R.a,null,"\u0413\u0440\u0435\u0447\u043a\u0430"),o&&!l&&r.a.createElement(n.Fragment,null,r.a.createElement(J.a,null,r.a.createElement(F.a,{className:"User"},o.photo_200?r.a.createElement(v.a,{src:o.photo_200}):null,r.a.createElement("h2",null,"\u041f\u0440\u0438\u0432\u0435\u0442, ",o.first_name),r.a.createElement("h3",null,"\u042d\u0442\u043e\u0442 \u0441\u0435\u0440\u0432\u0438\u0441 \u043f\u043e\u043c\u043e\u0433\u0430\u0435\u0442 \u0441\u043b\u0435\u0434\u0438\u0442\u044c \u0437\u0430 \u0442\u0435\u043c, \u0447\u0442\u043e\u0431\u044b \u0433\u0440\u0435\u0447\u043a\u0430 \u0434\u043e\u043c\u0430 \u043d\u0435 \u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u043b\u0430\u0441\u044c \u0438 \u0442\u044b \u043d\u0435 \u043f\u043e\u043f\u0430\u043b \u0432 \u043d\u0435\u043b\u043e\u0432\u043a\u0443\u044e \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044e, \u043a\u043e\u0433\u0434\u0430 \u0435\u0435 \u043d\u0435 \u043e\u043a\u0430\u0436\u0435\u0442\u0441\u044f \u0432 \u0441\u0430\u043c\u044b\u0439 \u043d\u0443\u0436\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442."))),r.a.createElement(U.a,{vertical:"bottom"},r.a.createElement(F.a,null,r.a.createElement(I.a,{mode:"commerce",size:"xl",level:"2",onClick:function(){return a(c)}},"\u0412\u0441\u0451 \u043f\u043e\u043d\u044f\u0442\u043d\u043e")))))}),ne="home",re="intro",ce="state",oe="viewStatus",le=function(){var e=Object(n.useState)(re),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(p.a)(o,2),u=l[0],f=l[1],h=Object(n.useState)(null),E=Object(p.a)(h,2),y=E[0],O=E[1],S=Object(n.useState)(null),j=Object(p.a)(S,2),C=j[0],x=j[1],w=Object(n.useState)(r.a.createElement(k.a,{size:"large"})),A=Object(p.a)(w,2),V=A[0],N=A[1],z=Object(n.useState)(!1),P=Object(p.a)(z,2),W=P[0],K=P[1];Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.send("VKWebAppGetUserInfo");case 2:return t=e.sent,e.next=5,s.a.send("VKWebAppStorageGet",{keys:[ce,oe]});case 5:a=e.sent,Array.isArray(a.keys)?(n={},a.keys.forEach((function(e){var t=e.key,a=e.value;try{switch(n[t]=a?JSON.parse(a):{},t){case ce:O(n[ce]);break;case oe:n[t]&&n[t].hasSeenIntro&&(c(ne),K(!0))}}catch(o){x(r.a.createElement(d.a,{layout:"vertical",onClose:function(){return x(null)},before:r.a.createElement(v.a,{size:24,style:{backgroundColor:"var(--dynamic_red)"}},r.a.createElement(g.a,{fill:"#fff",width:14,height:14})),duration:900},"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 Storage")),O({})}}))):O({}),f(t),N(null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var r=document.createAttribute("scheme");r.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),function(){e.apply(this,arguments)}()}),[]);var I=function(e){c(e)},_=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.send("VKWebAppStorageSet",{key:oe,value:JSON.stringify({hasSeenIntro:!0})});case 3:I(t),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),x(r.a.createElement(d.a,{layout:"vertical",onClose:function(){return x(null)},before:r.a.createElement(v.a,{size:24,style:{backgroundColor:"var(--dynamic_red)"}},r.a.createElement(g.a,{fill:"#fff",width:14,height:14})),duration:900},"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 Storage"));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(b.a,{activePanel:a,popout:V},r.a.createElement(te,{id:ne,fetchedState:y,snackbarError:C}),r.a.createElement(ae,{id:re,fetchedUser:u,go:_,route:ne,userHasSeenIntro:W}))};s.a.send("VKWebAppInit"),o.a.render(r.a.createElement(le,null),document.getElementById("root"))}},[[119,1,2]]]);
//# sourceMappingURL=main.3d805f52.chunk.js.map