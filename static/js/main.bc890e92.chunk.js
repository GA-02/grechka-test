(this.webpackJsonpGrechka=this.webpackJsonpGrechka||[]).push([[0],{112:function(e,t,a){e.exports=a.p+"static/media/bistro-and-restaurant_16-512.5babe431.png"},116:function(e,t,a){e.exports=a(220)},212:function(e,t,a){},213:function(e,t,a){},220:function(e,t,a){"use strict";a.r(t);a(117),a(143),a(145),a(146),a(148),a(149),a(150),a(151),a(152),a(153),a(154),a(155),a(157),a(158),a(159),a(160),a(161),a(162),a(163),a(164),a(165),a(166),a(168),a(169),a(170),a(171),a(172),a(173),a(174),a(175),a(176),a(177),a(178),a(179),a(180),a(181),a(182),a(183),a(184),a(185);var n=a(0),r=a.n(n),c=a(78),o=a.n(c),l=a(17),s=a.n(l),i=a(21),u=a.n(i),m=a(44),f=a(14),p=a(79),b=a.n(p),h=a(45),d=a.n(h),E=a(35),v=a.n(E),y=a(114),O=a.n(y),g=a(80),S=a.n(g),j=(a(195),a(57)),k=a.n(j),C=a(58),w=a.n(C),x=a(115),A=a(59),N=a.n(A),V=a(60),z=a.n(V),P=a(56),I=a.n(P),K=a(55),W=a.n(K),_=a(50),J=a.n(_),T=a(51),U=a.n(T),G=a(113),B=a.n(G),H=a(61),D=a.n(H),F=a(81),L=a.n(F),M=a(112),q=a.n(M),Q=s.a.supports("VKWebAppTapticNotificationOccurred");function R(e,t){var a,n,r=!1;return function c(){if(r)return a=arguments,void(n=this);r=!0,e.apply(this,arguments),setTimeout((function(){r=!1,a&&(c.apply(n,a),a=n=null)}),t)}}var X=function(e){var t=e.fetchedState,a=e.snackbarError,c=Object(n.useState)(t.hasOwnProperty("rollsCount")?t.rollsCount:4),o=Object(f.a)(c,2),l=o[0],i=o[1],p=Object(n.useState)(t.hasOwnProperty("toiletVisits")?t.toiletVisits:3),b=Object(f.a)(p,2),h=b[0],E=b[1],y=Object(n.useState)(t.hasOwnProperty("personsCount")?t.personsCount:2),O=Object(f.a)(y,2),g=O[0],S=O[1],j=Object(n.useState)(t.hasOwnProperty("sheetsCount")?t.sheetsCount:40),k=Object(f.a)(j,2),C=k[0],w=k[1],A=Object(n.useState)(a),V=Object(f.a)(A,2),P=V[0],K=V[1],_=function(){var e=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Q){e.next=3;break}return e.next=3,s.a.send("VKWebAppTapticNotificationOccurred",{type:C<=0?"error":"success"});case 3:if(!(C<=0)){e.next=7;break}return K(r.a.createElement(d.a,{layout:"vertical",onClose:function(){return K(null)},before:r.a.createElement(v.a,{size:24,style:{backgroundColor:"var(--accent)"}},r.a.createElement(L.a,{fill:"#fff",width:14,height:14})),duration:900},"\u0423 \u0432\u0430\u0441 \u043d\u0435 \u043e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u0433\u0440\u0435\u0447\u043a\u0438")),i(0),e.abrupt("return");case 7:t=C-1,a=Math.floor(t/10),w(t),l!==a&&0!==a&&i(a),K(r.a.createElement(d.a,{layout:"vertical",onClose:function(){return K(null)},before:r.a.createElement(v.a,{size:24,style:{backgroundColor:"var(--accent)"}},r.a.createElement(L.a,{fill:"#fff",width:14,height:14})),duration:900},t<=0?"\u0423 \u0432\u0430\u0441 \u043d\u0435 \u043e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u0433\u0440\u0435\u0447\u043a\u0438":"100 \u0433\u0440\u0430\u043c\u043c \u0433\u0440\u0435\u0447\u043a\u0438 \u043f\u043e\u0442\u0440\u0430\u0447\u0435\u043d\u043e, \u043e\u0441\u0442\u0430\u043b\u043e\u0441\u044c ".concat(t," \u043f\u0440\u0438\u0435\u043c\u043e\u0432 \u043f\u0438\u0449\u0438"))),T({sheetsCount:t});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.send("VKWebAppStorageSet",{key:"state",value:JSON.stringify(Object(x.a)({rollsCount:l,toiletVisits:h,personsCount:g,sheetsCount:C},t))});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=R((function(e){e!==l&&(w(C+10*(e-l)),i(e),T())}),200),H=R((function(e){e!==h&&(E(e),T())}),200),F=R((function(e){e!==g&&(S(e),T())}),200);return r.a.createElement(n.Fragment,null,r.a.createElement(W.a,null,r.a.createElement("h1",{className:"DaysLeftHeading"},function(){var e=1*h*g,t=10*l;return Math.round(t/e)}()),r.a.createElement("h3",{className:"DaysLeftSubheading"},"\u0421\u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043d\u0435\u0439 \u0432\u044b \u043f\u0440\u043e\u0434\u0435\u0440\u0436\u0438\u0442\u0435\u0441\u044c")),r.a.createElement(B.a,null,r.a.createElement(N.a,{step:1,min:0,max:100,value:l,top:r.a.createElement(z.a,{indicator:r.a.createElement(D.a,{size:"m",mode:"primary"},l)},r.a.createElement("span",{role:"img","aria-label":"Toilet paper"},"\ud83e\udd61")," \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0430\u0447\u0435\u043a"),onChange:function(e){return G(e)}}),r.a.createElement(N.a,{step:1,min:1,max:8,value:h,top:r.a.createElement(z.a,{indicator:r.a.createElement(D.a,{size:"m",mode:"primary"},h)},r.a.createElement("span",{role:"img","aria-label":"Poo"},"\ud83e\udd63")," \u041f\u0440\u0438\u0435\u043c\u043e\u0432 \u043f\u0438\u0449\u0438 \u0432 \u0434\u0435\u043d\u044c"),onChange:function(e){return H(e)}}),r.a.createElement(N.a,{step:1,min:1,max:16,value:g,top:r.a.createElement(z.a,{indicator:r.a.createElement(D.a,{size:"m",mode:"primary"},g)},r.a.createElement("span",{role:"img","aria-label":"People in household"},"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66")," \u041b\u044e\u0434\u0435\u0439 \u0434\u043e\u043c\u0430"),onChange:function(e){return F(e)}})),r.a.createElement(J.a,{vertical:"bottom"},r.a.createElement(U.a,{className:"PooBtnContainer"},r.a.createElement(I.a,{className:"PooBtn",size:"xl",onClick:_},r.a.createElement("img",{src:q.a,alt:"Toilet paper roll"})))),P)},Y=(a(212),function(e){var t=e.id,a=e.snackbarError,n=e.fetchedState;return r.a.createElement(k.a,{id:t},r.a.createElement(w.a,null,"\u0413\u0440\u0435\u0447\u043a\u0430"),n&&r.a.createElement(X,{fetchedState:n,snackbarError:a}))}),Z=(a(213),function(e){var t=e.id,a=e.go,c=e.route,o=e.fetchedUser,l=e.userHasSeenIntro;return r.a.createElement(k.a,{id:t,centered:!0},r.a.createElement(w.a,null,"\u0413\u0440\u0435\u0447\u043a\u0430"),o&&!l&&r.a.createElement(n.Fragment,null,r.a.createElement(W.a,null,r.a.createElement(U.a,{className:"User"},o.photo_200?r.a.createElement(v.a,{src:o.photo_200}):null,r.a.createElement("h2",null,"\u041f\u0440\u0438\u0432\u0435\u0442, ",o.first_name),r.a.createElement("h3",null,"\u042d\u0442\u043e\u0442 \u0441\u0435\u0440\u0432\u0438\u0441 \u043f\u043e\u043c\u043e\u0433\u0430\u0435\u0442 \u0441\u043b\u0435\u0434\u0438\u0442\u044c \u0437\u0430 \u0442\u0435\u043c, \u0447\u0442\u043e\u0431\u044b \u0433\u0440\u0435\u0447\u043a\u0430 \u0434\u043e\u043c\u0430 \u043d\u0435 \u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u043b\u0430\u0441\u044c \u0438 \u0442\u044b \u043d\u0435 \u043f\u043e\u043f\u0430\u043b \u0432 \u043d\u0435\u043b\u043e\u0432\u043a\u0443\u044e \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044e, \u043a\u043e\u0433\u0434\u0430 \u0435\u0435 \u043d\u0435 \u043e\u043a\u0430\u0436\u0435\u0442\u0441\u044f \u0432 \u0441\u0430\u043c\u044b\u0439 \u043d\u0443\u0436\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442."))),r.a.createElement(J.a,{vertical:"bottom"},r.a.createElement(U.a,null,r.a.createElement(I.a,{mode:"commerce",size:"xl",level:"2",onClick:function(){return a(c)}},"\u041e\u041a, \u0432\u0441\u0451 \u043f\u043e\u043d\u044f\u0442\u043d\u043e")))))}),$="home",ee="intro",te="state",ae="viewStatus",ne=function(){var e=Object(n.useState)(ee),t=Object(f.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),l=Object(f.a)(o,2),i=l[0],p=l[1],h=Object(n.useState)(null),E=Object(f.a)(h,2),y=E[0],g=E[1],j=Object(n.useState)(null),k=Object(f.a)(j,2),C=k[0],w=k[1],x=Object(n.useState)(r.a.createElement(O.a,{size:"large"})),A=Object(f.a)(x,2),N=A[0],V=A[1],z=Object(n.useState)(!1),P=Object(f.a)(z,2),I=P[0],K=P[1];Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.send("VKWebAppGetUserInfo");case 2:return t=e.sent,e.next=5,s.a.send("VKWebAppStorageGet",{keys:[te,ae]});case 5:a=e.sent,Array.isArray(a.keys)?(n={},a.keys.forEach((function(e){var t=e.key,a=e.value;try{switch(n[t]=a?JSON.parse(a):{},t){case te:g(n[te]);break;case ae:n[t]&&n[t].hasSeenIntro&&(c($),K(!0))}}catch(o){w(r.a.createElement(d.a,{layout:"vertical",onClose:function(){return w(null)},before:r.a.createElement(v.a,{size:24,style:{backgroundColor:"var(--dynamic_red)"}},r.a.createElement(S.a,{fill:"#fff",width:14,height:14})),duration:900},"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 Storage")),g({})}}))):g({}),p(t),V(null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var r=document.createAttribute("scheme");r.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),function(){e.apply(this,arguments)}()}),[]);var W=function(e){c(e)},_=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.send("VKWebAppStorageSet",{key:ae,value:JSON.stringify({hasSeenIntro:!0})});case 3:W(t),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),w(r.a.createElement(d.a,{layout:"vertical",onClose:function(){return w(null)},before:r.a.createElement(v.a,{size:24,style:{backgroundColor:"var(--dynamic_red)"}},r.a.createElement(S.a,{fill:"#fff",width:14,height:14})),duration:900},"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 Storage"));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(b.a,{activePanel:a,popout:N},r.a.createElement(Y,{id:$,fetchedState:y,snackbarError:C}),r.a.createElement(Z,{id:ee,fetchedUser:i,go:_,route:$,userHasSeenIntro:I}))};s.a.send("VKWebAppInit"),o.a.render(r.a.createElement(ne,null),document.getElementById("root"))}},[[116,1,2]]]);
//# sourceMappingURL=main.bc890e92.chunk.js.map