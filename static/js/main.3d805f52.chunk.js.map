{"version":3,"sources":["img/bistro-and-restaurant_16-512.png","components/Sliders.js","panels/Home.js","panels/Intro.js","App.js","index.js"],"names":["module","exports","IS_TAPTIC_SUPPORTED","bridge","supports","throttle","callback","delay","args","context","isThrottled","wrapper","arguments","this","apply","setTimeout","Home","fetchedState","snackbarError","useState","hasOwnProperty","rollsCount","setRollsCount","toiletVisits","setToiletVisits","personsCount","setPersonsCount","sheetsCount","SHEETS_PER_ROLL","setSheetsCount","snackbar","setSnackbar","onSheet","a","send","type","layout","onClose","before","size","style","backgroundColor","fill","width","height","duration","newSheetsCount","newRollsCount","Math","floor","setStorage","showWallPost","id","countDays","properties","key","value","JSON","stringify","sheetsPerDay","totalSheets","round","onRollsChange","rolls","onVisitsChange","visits","onPersonsChange","persons","left","Fragment","onClick","right","className","step","min","max","top","indicator","mode","role","aria-label","onChange","vertical","src","roll","alt","Sliders","Intro","go","route","fetchedUser","userHasSeenIntro","centered","photo_200","first_name","level","ROUTES","STORAGE_KEYS","App","activePanel","setActivePanel","setUser","setFetchedState","popout","setPopout","setUserHasSeenIntro","useEffect","user","keys","sheetState","Array","isArray","data","forEach","parse","hasSeenIntro","error","subscribe","detail","schemeAttribute","document","createAttribute","scheme","body","attributes","setNamedItem","fetchData","panel","viewIntro","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.3d805f52.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bistro-and-restaurant_16-512.5babe431.png\";","import React, { useState, Fragment } from 'react';\nimport Slider from '@vkontakte/vkui/dist/components/Slider/Slider';\nimport Header from '@vkontakte/vkui/dist/components/Header/Header';\nimport Button from '@vkontakte/vkui/dist/components/Button/Button';\nimport Group from '@vkontakte/vkui/dist/components/Group/Group';\nimport FixedLayout from '@vkontakte/vkui/dist/components/FixedLayout/FixedLayout';\nimport Avatar from '@vkontakte/vkui/dist/components/Avatar/Avatar';\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\nimport FormLayout from '@vkontakte/vkui/dist/components/FormLayout/FormLayout';\nimport Counter from '@vkontakte/vkui/dist/components/Counter/Counter';\nimport Snackbar from '@vkontakte/vkui/dist/components/Snackbar/Snackbar';\nimport Icon28DocumentOutline from '@vkontakte/icons/dist/28/document_outline';\nimport bridge from '@vkontakte/vk-bridge';\nimport roll from '../img/bistro-and-restaurant_16-512.png';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport PanelHeaderButton from '@vkontakte/vkui/dist/components/PanelHeaderButton/PanelHeaderButton';\nimport Icon28ShareOutline from '@vkontakte/icons/dist/28/share_outline';\n\nconst SHEETS_PER_ROLL = 10;\nconst SHEETS_PER_VISIT = 1;\nconst DEFAULT_ROLLS_COUNT = 4;\nconst DEFAULT_TOILET_VISITS = 3;\nconst DEFAULT_PERSONS_COUNT = 2;\nconst IS_TAPTIC_SUPPORTED = bridge.supports('VKWebAppTapticNotificationOccurred');\n\nfunction throttle(callback, delay) {\n\tlet isThrottled = false, args, context;\n\n\tfunction wrapper() {\n\t\tif (isThrottled) {\n\t\t\targs = arguments;\n\t\t\tcontext = this;\n\t\t\treturn;\n\t\t}\n\n\t\tisThrottled = true;\n\t\tcallback.apply(this, arguments);\n\n\t\tsetTimeout(() => {\n\t\t\tisThrottled = false;\n\t\t\tif (args) {\n\t\t\t\twrapper.apply(context, args);\n\t\t\t\targs = context = null;\n\t\t\t}\n\t\t}, delay);\n\t}\n\treturn wrapper;\n}\n\nconst Home = ({ fetchedState, snackbarError }) => {\n\tconst [rollsCount, setRollsCount] = useState(fetchedState.hasOwnProperty('rollsCount') ? fetchedState.rollsCount : DEFAULT_ROLLS_COUNT);\n\tconst [toiletVisits, setToiletVisits] = useState(fetchedState.hasOwnProperty('toiletVisits') ? fetchedState.toiletVisits : DEFAULT_TOILET_VISITS);\n\tconst [personsCount, setPersonsCount] = useState(fetchedState.hasOwnProperty('personsCount') ? fetchedState.personsCount : DEFAULT_PERSONS_COUNT);\n\tconst [sheetsCount, setSheetsCount] = useState(fetchedState.hasOwnProperty('sheetsCount') ? fetchedState.sheetsCount : SHEETS_PER_ROLL * DEFAULT_ROLLS_COUNT);\n\tconst [snackbar, setSnackbar] = useState(snackbarError);\n\n\tconst onSheet = async function () {\n\t\tif (IS_TAPTIC_SUPPORTED) {\n\t\t\tawait bridge.send('VKWebAppTapticNotificationOccurred', { type: sheetsCount <= 0 ? 'error' : 'success' });\n\t\t}\n\t\tif (sheetsCount <= 0) {\n\t\t\tsetSnackbar(<Snackbar\n\t\t\t\tlayout='vertical'\n\t\t\t\tonClose={() => setSnackbar(null)}\n\t\t\t\tbefore={<Avatar size={24} style={{ backgroundColor: 'var(--accent)' }}><Icon28DocumentOutline fill='#fff' width={14} height={14} /></Avatar>}\n\t\t\t\tduration={900}\n\t\t\t>\n\t\t\t\tУ вас не осталось гречки\n\t\t\t</Snackbar>);\n\t\t\tsetRollsCount(0);\n\t\t\treturn;\n\t\t}\n\t\tconst newSheetsCount = sheetsCount - 1;\n\t\tconst newRollsCount = Math.floor(newSheetsCount / SHEETS_PER_ROLL);\n\n\t\tsetSheetsCount(newSheetsCount);\n\t\tif (rollsCount !== newRollsCount && newRollsCount !== 0) {\n\t\t\tsetRollsCount(newRollsCount);\n\t\t}\n\t\tsetSnackbar(<Snackbar\n\t\t\tlayout='vertical'\n\t\t\tonClose={() => setSnackbar(null)}\n\t\t\tbefore={<Avatar size={24} style={{ backgroundColor: 'var(--accent)' }}><Icon28DocumentOutline fill='#fff' width={14} height={14} /></Avatar>}\n\t\t\tduration={900}\n\t\t>\n\t\t\t{newSheetsCount <= 0 ? 'У вас не осталось гречки' : `100 грамм гречки потрачено, осталось ${newSheetsCount} приемов пищи`}\n\t\t</Snackbar>);\n\t\tsetStorage({\n\t\t\tsheetsCount: newSheetsCount\n\t\t});\n\t}\n\n\tconst showWallPost = async function ({ id }) {\n\t\tlet a;\n\t\tif (countDays() < 15 && countDays() > 10) {\n\t\t\ta = 'дней';\n\t\t} else {\n\t\t\tswitch (countDays() % 10) {\n\t\t\t\tcase 1: a = 'день'; break;\n\t\t\t\tcase 2:\n\t\t\t\tcase 3:\n\t\t\t\tcase 4: a = 'дня'; break;\n\t\t\t\tcase 5:\n\t\t\t\tcase 6:\n\t\t\t\tcase 7:\n\t\t\t\tcase 8:\n\t\t\t\tcase 9:\n\t\t\t\tcase 0: a = 'дней'; break;\n\t\t\t\tdefault: break;\n\n\t\t\t}\n\t\t}\n\n\t\tawait bridge.send(\"VKWebAppShowWallPostBox\", { \"message\": `Благодаря гречневой крупе, я смогу продержаться ${countDays()} ${a} во время ужасной пандемии, узнай свой результат в приложении \"Гречка — выжить любой ценой\" `, \"attachments\": \"photo{id},https://vk.com/app7672316\" });\n\n\t}\n\n\tconst setStorage = async function (properties) {\n\t\tawait bridge.send('VKWebAppStorageSet', {\n\t\t\tkey: 'state',\n\t\t\tvalue: JSON.stringify({\n\t\t\t\trollsCount,\n\t\t\t\ttoiletVisits,\n\t\t\t\tpersonsCount,\n\t\t\t\tsheetsCount,\n\t\t\t\t...properties\n\t\t\t})\n\t\t});\n\t}\n\n\tconst countDays = function () {\n\t\tconst sheetsPerDay = SHEETS_PER_VISIT * toiletVisits * personsCount;\n\t\tconst totalSheets = rollsCount * SHEETS_PER_ROLL\n\t\treturn Math.round(totalSheets / sheetsPerDay);\n\t}\n\n\tconst onRollsChange = throttle(rolls => {\n\t\tif (rolls === rollsCount) return;\n\t\tsetSheetsCount(sheetsCount + (rolls - rollsCount) * SHEETS_PER_ROLL);\n\t\tsetRollsCount(rolls);\n\t\tsetStorage();\n\t}, 200);\n\n\tconst onVisitsChange = throttle(visits => {\n\t\tif (visits === toiletVisits) return;\n\t\tsetToiletVisits(visits)\n\t\tsetStorage();\n\t}, 200);\n\n\tconst onPersonsChange = throttle(persons => {\n\t\tif (persons === personsCount) return;\n\t\tsetPersonsCount(persons);\n\t\tsetStorage();\n\t}, 200);\n\n\treturn (\n\n\t\t<Fragment>\n\t\t\t<PanelHeader left={\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<PanelHeaderButton onClick={showWallPost}><Icon28ShareOutline /></PanelHeaderButton>\n\t\t\t\t</React.Fragment>\n\t\t\t}\n\t\t\t\tright={\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<PanelHeaderButton><Icon28DocumentOutline /></PanelHeaderButton>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t}\n\n\n\t\t\t>Гречка</PanelHeader>\n\n\t\t\t<Group>\n\t\t\t\t<h1 className='DaysLeftHeading'>{countDays()}</h1>\n\t\t\t\t<h3 className='DaysLeftSubheading'>Столько дней вы продержитесь</h3>\n\t\t\t</Group>\n\t\t\t<FormLayout>\n\t\t\t\t<Slider\n\t\t\t\t\tstep={1}\n\t\t\t\t\tmin={0}\n\t\t\t\t\tmax={100}\n\t\t\t\t\tvalue={rollsCount}\n\t\t\t\t\ttop={\n\t\t\t\t\t\t<Header indicator={<Counter size='m' mode='primary'>{rollsCount}</Counter>}>\n\t\t\t\t\t\t\t<span role='img' aria-label='Toilet paper'>🥡</span> Количество пачек\n\t\t\t\t\t\t\t</Header>\n\t\t\t\t\t}\n\t\t\t\t\tonChange={(rolls) => onRollsChange(rolls)}\n\t\t\t\t/>\n\t\t\t\t<Slider\n\t\t\t\t\tstep={1}\n\t\t\t\t\tmin={1}\n\t\t\t\t\tmax={8}\n\t\t\t\t\tvalue={toiletVisits}\n\t\t\t\t\ttop={\n\t\t\t\t\t\t<Header indicator={<Counter size='m' mode='primary'>{toiletVisits}</Counter>}>\n\t\t\t\t\t\t\t<span role='img' aria-label='Poo'>🥣</span> Приемов пищи в день\n\t\t\t\t\t\t\t</Header>\n\t\t\t\t\t}\n\t\t\t\t\tonChange={visits => onVisitsChange(visits)}\n\t\t\t\t/>\n\t\t\t\t<Slider\n\t\t\t\t\tstep={1}\n\t\t\t\t\tmin={1}\n\t\t\t\t\tmax={16}\n\t\t\t\t\tvalue={personsCount}\n\t\t\t\t\ttop={\n\t\t\t\t\t\t<Header indicator={<Counter size='m' mode='primary'>{personsCount}</Counter>}>\n\t\t\t\t\t\t\t<span role='img' aria-label='People in household'>👨‍👩‍👧‍👦</span> Людей дома\n\t\t\t\t\t\t\t</Header>\n\t\t\t\t\t}\n\t\t\t\t\tonChange={persons => onPersonsChange(persons)}\n\t\t\t\t/>\n\t\t\t</FormLayout>\n\n\t\t\t<FixedLayout vertical=\"bottom\">\n\t\t\t\t<Div className='PooBtnContainer'>\n\t\t\t\t\t<Button className='PooBtn' size='xl' onClick={onSheet}>\n\t\t\t\t\t\t<img src={roll} alt=\"Toilet paper roll\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</Div>\n\t\t\t</FixedLayout>\n\n\t\t\t{snackbar}\n\t\t</Fragment>\n\t);\n};\n\nexport default Home;\n","import React from 'react';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport PanelHeaderButton from '@vkontakte/vkui/dist/components/PanelHeaderButton/PanelHeaderButton';\nimport Icon28ShareOutline from '@vkontakte/icons/dist/28/share_outline';\nimport Icon28DocumentOutline from '@vkontakte/icons/dist/28/document_outline';\nimport Sliders from '../components/Sliders';\nimport showWallPost from '../components/Sliders';\nimport './Home.css';\n\nconst Home = ({ id, snackbarError, fetchedState, }) => {\n\n\nreturn (\n\t\t<Panel id={id}>\n\t\t\t\n\t\t\t{fetchedState && <Sliders fetchedState={fetchedState} snackbarError={snackbarError} />}\n\t\t</Panel>\n\t);\n};\n\n\t\n\nexport default Home;\n","import React, { Fragment } from 'react';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport Group from '@vkontakte/vkui/dist/components/Group/Group';\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\nimport Button from '@vkontakte/vkui/dist/components/Button/Button';\nimport FixedLayout from '@vkontakte/vkui/dist/components/FixedLayout/FixedLayout';\nimport Avatar from '@vkontakte/vkui/dist/components/Avatar/Avatar';\n\nimport './Intro.css';\n\nconst Intro = ({ id, go, route, fetchedUser, userHasSeenIntro }) => (\n\t<Panel id={id} centered={true}>\n\t\t<PanelHeader>Гречка</PanelHeader>\n\t\t{(fetchedUser && !userHasSeenIntro) &&\n\t\t\t<Fragment>\n\t\t\t\t<Group>\n\t\t\t\t\t<Div className='User'>\n\t\t\t\t\t\t{fetchedUser.photo_200 ? <Avatar src={fetchedUser.photo_200}/> : null}\n\t\t\t\t\t\t<h2>Привет, {fetchedUser.first_name}</h2>\n\t\t\t\t\t\t<h3>Этот сервис помогает следить за тем, чтобы гречка дома не заканчивалась и ты не попал в неловкую ситуацию, когда ее не окажется в самый нужный момент.</h3>\n\t\t\t\t\t</Div>\n\t\t\t\t</Group>\n\t\t\t\t<FixedLayout vertical='bottom'>\n\t\t\t\t\t<Div>\n\t\t\t\t\t\t<Button mode='commerce' size=\"xl\" level=\"2\" onClick={() => go(route)}>\n\t\t\t\t\t\t\tВсё понятно\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Div>\n\t\t\t\t</FixedLayout>\n\t\t\t</Fragment>\n\t\t}\n\t</Panel>\n);\nexport default Intro;\n","import React, { useState, useEffect } from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport Snackbar from '@vkontakte/vkui/dist/components/Snackbar/Snackbar';\nimport Avatar from '@vkontakte/vkui/dist/components/Avatar/Avatar';\nimport ScreenSpinner from '@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner';\nimport Icon24Error from '@vkontakte/icons/dist/24/error';\n\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Home from './panels/Home';\nimport Intro from './panels/Intro';\n\nconst ROUTES = {\n\tHOME: 'home',\n\tINTRO: 'intro',\n};\n\nconst STORAGE_KEYS = {\n\tSTATE: 'state',\n\tSTATUS: 'viewStatus',\n};\n\nconst App = () => {\n\tconst [activePanel, setActivePanel] = useState(ROUTES.INTRO);\n\tconst [fetchedUser, setUser] = useState(null);\n\tconst [fetchedState, setFetchedState] = useState(null);\n\tconst [snackbar, setSnackbar] = useState(null);\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\n\tconst [userHasSeenIntro, setUserHasSeenIntro] = useState(false);\n\n\tuseEffect(() => {\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\t\tasync function fetchData() {\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\n\t\t\tconst sheetState = await bridge.send('VKWebAppStorageGet', { keys: [STORAGE_KEYS.STATE, STORAGE_KEYS.STATUS]});\n\t\t\tif (Array.isArray(sheetState.keys)) {\n\t\t\t\tconst data = {};\n\t\t\t\tsheetState.keys.forEach(({ key, value }) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tdata[key] = value ? JSON.parse(value) : {};\n\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\tcase STORAGE_KEYS.STATE:\n\t\t\t\t\t\t\t\tsetFetchedState(data[STORAGE_KEYS.STATE]);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase STORAGE_KEYS.STATUS:\n\t\t\t\t\t\t\t\tif (data[key] && data[key].hasSeenIntro) {\n\t\t\t\t\t\t\t\t\tsetActivePanel(ROUTES.HOME);\n\t\t\t\t\t\t\t\t\tsetUserHasSeenIntro(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tsetSnackbar(<Snackbar\n\t\t\t\t\t\t\tlayout='vertical'\n\t\t\t\t\t\t\tonClose={() => setSnackbar(null)}\n\t\t\t\t\t\t\tbefore={<Avatar size={24} style={{backgroundColor: 'var(--dynamic_red)'}}><Icon24Error fill='#fff' width={14} height={14} /></Avatar>}\n\t\t\t\t\t\t\tduration={900}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tПроблема с получением данных из Storage\n\t\t\t\t\t\t</Snackbar>\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetFetchedState({});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tsetFetchedState({});\n\t\t\t}\n\t\t\tsetUser(user);\n\t\t\tsetPopout(null);\n\t\t}\n\t\tfetchData();\n\t}, []);\n\n\tconst go = panel => {\n\t\tsetActivePanel(panel);\n\t};\n\n\tconst viewIntro = async (panel) => {\n\t\ttry {\n\t\t\tawait bridge.send('VKWebAppStorageSet', {\n\t\t\t\tkey: STORAGE_KEYS.STATUS,\n\t\t\t\tvalue: JSON.stringify({\n\t\t\t\t\thasSeenIntro: true,\n\t\t\t\t}),\n\t\t\t});\n\t\t\tgo(panel);\n\t\t} catch (error) {\n\t\t\tsetSnackbar(<Snackbar\n\t\t\t\tlayout='vertical'\n\t\t\t\tonClose={() => setSnackbar(null)}\n\t\t\t\tbefore={<Avatar size={24} style={{backgroundColor: 'var(--dynamic_red)'}}><Icon24Error fill='#fff' width={14} height={14} /></Avatar>}\n\t\t\t\tduration={900}\n\t\t\t>\n\t\t\t\tПроблема с отправкой данных в Storage\n\t\t\t</Snackbar>\n\t\t\t);\n\t\t}\n\t}\n\n\treturn (\n\t\t<View activePanel={activePanel} popout={popout}>\n\t\t\t<Home id={ROUTES.HOME} fetchedState={fetchedState} snackbarError={snackbar} />\n\t\t\t<Intro id={ROUTES.INTRO} fetchedUser={fetchedUser} go={viewIntro} route={ROUTES.HOME} userHasSeenIntro={userHasSeenIntro} />\n\t\t</View>\n\t);\n}\n\nexport default App;\n\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}